<!--
*
*  INSPINIA - Responsive Admin Theme
*  version 2.7
*
-->

<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>INSPINIA | Dashboard</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet">

    <!-- Toastr style -->
    <link href="css/plugins/toastr/toastr.min.css" rel="stylesheet">

    <!-- Gritter -->
    <link href="js/plugins/gritter/jquery.gritter.css" rel="stylesheet">

    <link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="js/iosselect-master/src/iosSelect.css" rel="stylesheet">
    <style type="text/css">
        input[type="checkbox"] + label::before {
            content: '\a0'; /* non-break space */
            display: inline-block;
            vertical-align: .2em;
            width: .8em;
            height: .8em;
            margin-right: .2em;
            border-radius: .2em;
            background: silver;
            text-indent: .15em;
            line-height: .65;
        }
        input[type="checkbox"]:checked + label::before {
            content: '\2713';
            background: yellowgreen;
        }
        input[type="checkbox"]:focus + label::before {
            box-shadow: 0 0 .1em .1em #58a;
        }
        input[type="checkbox"]:disabled + label::before {
            background: gray;
            box-shadow: none;
            color: #555;
        }
    </style>

</head>

<body>
<div id="wrapper">
    <div class="row white-bg dashboard-header">
        <div class="col-md-12">
            <h2>欢迎光临凤凰城</h2>
            <small>预交停车费系统.</small>
            <ul class="list-group clear-list m-t">

                    <!-- <li class="list-group-item fist-item"> -->
                        <div class=""   data-toggle="distpicker" id="distpicker">
                          <select class="province" data-province="豫" ></select>

                        </div>
                    
                        <div class=" input-group">
                            <input type="text" class="form-control license-number" placeholder="车牌号">
                            <span class="input-group-btn">
                                <button type="button" class="btn btn-primary go">Go!</button>
                            </span>
                        </div>
                    <!-- </li> -->
                    <input type="checkbox" id="mycheck" />
                    <lable for="mycheck">check me</label>


                <div class="show-message hide">
                    <li class="list-group-item">
                        <span class="label label-info">入场时间</span> <span class="enter-time"></span>
                    </li>
                    <li class="list-group-item">
                        <span class="label label-info">应缴金额</span> <span class="pay"></span>
                    </li>
                    <div class="reminder"></div>

                    <li class="list-group-item">
                        <button type="button" class="btn btn-primary wechat">微信支付</button>
                        <button type="button" class="btn btn-info zhifubao">支付宝支付</button>
                    </li>
                </div>

            </ul>
        </div>
    </div>
</div>
<!-- Mainly scripts -->
<script src="js/jquery-3.1.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/distpicker-master/docs/js/distpicker.js"></script>
<script src="js/iosselect-master/src/iosSelect.js"></script>
<script src="js/iosselect-master/src/iscroll.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $('.go').on('click',function(){
            if($(".license-number").val() == '') {
                var reminderInputNumber =  "<span class='inputNumber' style='color:#FF6347;'>" + "请输入车牌号！" + "</span>";
                if($(".inputNumber").length == 0) {
                    $(".list-group").append(reminderInputNumber);
                }
                return;
            }
            var province = $("#distpicker  option:selected").text();
            var number = $(".license-number").val();
            console.log(province + number);
            $.ajax({
                url: "a.json",
                type: "GET",
                dataType: 'json',
                data: province + number,
                success: function(data){
                    console.log(data);
                    if(data.Code == 1){
                        $(".show-message").removeClass("hide");
                        $(".inputNumber").remove();
                        $(".enter-time").html(data.Data.enterTime);
                        $(".pay").html(data.Data.pay + "元");
                    } else {
                        alert("车牌号输入有误，请重新输入");
                    }
                },
                error: function(err){
                    console.log(err);
                }
            })
        })
        //微信支付
        $(".wechat").on("click", function(){

            $.ajax({
                url: "wechat.json",
                type: "GET",
                dataType: 'json',
                data:$(".license-number").val(),
                success: function(data) {
                    if(data.Code == 10) {
                        location.href = 'success.html';
                    } else {
                        var  paymentFailed = "<span style='color:#FF6347;'>" + "支付失败，请重新支付！" + "</span>";
                        if($(".reminder").find('span').length == 0){
                            $(".reminder").append(paymentFailed);
                        }
                    }
                },
                error: function (err) {
                    console.log(err);
                }
            })
        })
        //支付宝支付
        $(".zhifubao").on("click", function () {
            $.ajax({
                url: "zhifubao.json",
                type: "GET",
                dataType: "json",
                data: $(".license-number").val(),
                success: function (data) {
                    if(data.Code == 1) {
                        location.href = 'success.html';
                    } else {
                        var  paymentFailed = "<span style='color:#FF6347;'>" + "支付失败，请重新支付！" + "</span>";
                        if($(".reminder").find('span').length == 0){
                            $(".reminder").append(paymentFailed);
                        }
                    }
                },
                error: function (err) {
                    console.log(err);
                }
            })
        })
    })
</script>
</body>
</html>
